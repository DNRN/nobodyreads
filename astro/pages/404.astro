---
import SiteLayout from "../layouts/SiteLayout.astro";
import { getNavItems } from "../../src/content/db.js";
import { DEFAULT_TENANT_ID } from "../../src/shared/types.js";
import { getDbClient } from "../lib/db.js";

const tenantId = process.env.TENANT_ID || DEFAULT_TENANT_ID;
const urlPrefix = process.env.URL_PREFIX || "";
const siteName = process.env.SITE_NAME || "nobodyreads.me";
const siteTagline =
  process.env.SITE_TAGLINE ||
  "Another simple blog engine. For writing mostly to yourself.";

const db = await getDbClient();
const navItems = await getNavItems(db, tenantId);

Astro.response.status = 404;

const options = {
  title: `404 â€” ${siteName}`,
  navItems,
  seo: { noIndex: true },
  urlPrefix,
  siteName,
  siteTagline,
};
---
<SiteLayout options={options}>
  <div class="post-header">
    <h2 class="post-title">Not found</h2>
  </div>
  <p>There's nothing here.</p>
  <a href={urlPrefix || "/"} class="back-link">&larr; back to home</a>
</SiteLayout>
