---
import AdminLayout from "../../../layouts/AdminLayout.astro";
import PageEditorForm from "../../../components/admin/PageEditorForm.astro";
import { editorRequiresAuth, isAuthenticatedRequest } from "../../../../src/editor/auth.js";

if (editorRequiresAuth() && !isAuthenticatedRequest(Astro.request)) {
  return Astro.redirect("/admin/login");
}
---
<AdminLayout
  title="New Page â€” Admin"
  scripts={`<script src="https://cdn.jsdelivr.net/npm/marked@15/marked.min.js"></script>
  <script src="/editor.js"></script>`}
>
  <PageEditorForm editorBase="/admin/editor" />
</AdminLayout>
